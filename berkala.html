<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Informasi Berkala</title>
  <link rel="stylesheet" href="full.css">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body style="padding-top: 25px;">
 
   <!-- Navbar -->
 <div class="navbar-no">
    <div class="navbar-logo-home">
      <img src="assets/LOGO FINAL.png" alt="Logo" />
    </div>
    <div class="navbar-menu-home">
      <a href="home.html" >Home</a> |

      <div class="dropdown d-inline">
        <a class="nav-link dropdown-toggle"  href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          Informasi
        </a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="infografis.html">Infografis</a></li>
          <li><a class="dropdown-item" href="ppid.html">PPID</a></li>
        </ul>
      </div>

      <a href="Profil Desaa.html">Profil Desa</a> |
      <a href="berita list.html">Berita</a> |

      <!-- Tambahan Dropdown Avatar -->
      <div class="dropdown d-inline">
        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="assets/profile.png" alt="User" width="40" height="40" class="rounded-circle" id="userAvatar">
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li id="loginOption"><a class="dropdown-item" href="login.html">Login</a></li>
          <li id="registerOption"><a class="dropdown-item" href="registrasi.html">Register</a></li>
          <li id="profileOption" class="d-none"><a class="dropdown-item" href="pengaduan.html">Profile</a></li>
          <li id="logoutOption" class="d-none"><a class="dropdown-item" href="#">Logout</a></li>
        </ul>
      </div>

    </div>
  </div>
</div>

<div class="berkala-container">
  <h1>Informasi Publik Secara Berkala</h1>
  <p class="subjudul">Informasi yang wajib disediakan dan diumumkan secara berkala.</p>
  <div class="accordion">
    <!-- Item 1: APB Desa -->
    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        Laporan Keuangan dan APBDes
        <span class="arrow">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 7L10 12L15 7" stroke="black" stroke-width="2" fill="none"/>
          </svg>
        </span>
      </div>
      <div class="accordion-content">
        <table>
          <thead>
            <tr>
              <th>No</th>
              <th>Judul</th>
              <th>Tanggal</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Realisasi APBDes Desa Soraya Tahun 2024</td>
              <td>Selasa, 14 Januari 2025</td>
              <td>
                <button class="btn" onclick="showPopup()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5.5L10.5 0H4zm4 1.5V5h3.5L8 1.5z"/>
                  </svg>
                  Lihat Berkas
                </button>
                <button class="btn"  onclick="alert('Dokumen telah diunduh')">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5V13a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V10.4a.5.5 0 0 1 1 0V13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V10.4a.5.5 0 0 1 .5-.5z"/>
                    <path d="M5.354 7.646a.5.5 0 1 1 .707.708L8 10.293V1.5a.5.5 0 0 1 1 0v8.793l1.939-1.939a.5.5 0 0 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5.354 8.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                  Unduh (6x)
                </button>
              </td>
            </tr>
            <tr>
              <td>2</td>
              <td>Laporan Keuangan Desa Soraya Tahun 2024</td>
              <td>Selasa, 14 Januari 2025</td>
              <td>
                <button class="btn" onclick="showPopup()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5.5L10.5 0H4zm4 1.5V5h3.5L8 1.5z"/>
                  </svg>
                  Lihat Berkas
                </button>
                <button class="btn"  onclick="alert('Dokumen telah diunduh')">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5V13a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V10.4a.5.5 0 0 1 1 0V13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V10.4a.5.5 0 0 1 .5-.5z"/>
                    <path d="M5.354 7.646a.5.5 0 1 1 .707.708L8 10.293V1.5a.5.5 0 0 1 1 0v8.793l1.939-1.939a.5.5 0 0 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5.354 8.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                  Unduh (4x)
                </button>
              </td>
            </tr>
            <tr>
              <td>3</td>
              <td>Laporan LKPPD Tahun 2024</td>
              <td>Selasa, 14 Januari 2025</td>
              <td>
                <button class="btn" onclick="showPopup()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5.5L10.5 0H4zm4 1.5V5h3.5L8 1.5z"/>
                  </svg>
                  Lihat Berkas
                </button>
                <button class="btn"  onclick="alert('Dokumen telah diunduh')">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5V13a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V10.4a.5.5 0 0 1 1 0V13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V10.4a.5.5 0 0 1 .5-.5z"/>
                    <path d="M5.354 7.646a.5.5 0 1 1 .707.708L8 10.293V1.5a.5.5 0 0 1 1 0v8.793l1.939-1.939a.5.5 0 0 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5.354 8.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                  Unduh (8x)
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="accordion-item">
      <div class="accordion-header" onclick="toggleAccordion(this)">
        Laporan Kegiatan Pemerintah Desa Soraya
        <span class="arrow">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 7L10 12L15 7" stroke="black" stroke-width="2" fill="none"/>
          </svg>
        </span>
      </div>
      <div class="accordion-content">
        <table>
          <thead>
            <tr>
              <th>No</th>
              <th>Judul</th>
              <th>Tanggal</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>Hasil-hasil Kegiatan Desa Soraya Tahun 2024</td>
              <td>Selasa, 14 Januari 2025</td>
              <td>
                <button class="btn" onclick="showPopup()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5.5L10.5 0H4zm4 1.5V5h3.5L8 1.5z"/>
                  </svg>
                  Lihat Berkas
                </button>
                <button class="btn"  onclick="alert('Dokumen telah diunduh')">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5V13a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V10.4a.5.5 0 0 1 1 0V13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V10.4a.5.5 0 0 1 .5-.5z"/>
                    <path d="M5.354 7.646a.5.5 0 1 1 .707.708L8 10.293V1.5a.5.5 0 0 1 1 0v8.793l1.939-1.939a.5.5 0 0 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5.354 8.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                  Unduh (9x)
                </button>
              </td>
            </tr>
            <tr>
              <td>2</td>
              <td>Laporan akses informasi publik tahun 2024</td>
              <td>Selasa, 14 Januari 2025</td>
              <td>
                <button class="btn" onclick="showPopup()">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5.5L10.5 0H4zm4 1.5V5h3.5L8 1.5z"/>
                  </svg>
                  Lihat Berkas
                </button>
                <button class="btn"  onclick="alert('Dokumen telah diunduh')">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5V13a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V10.4a.5.5 0 0 1 1 0V13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V10.4a.5.5 0 0 1 .5-.5z"/>
                    <path d="M5.354 7.646a.5.5 0 1 1 .707.708L8 10.293V1.5a.5.5 0 0 1 1 0v8.793l1.939-1.939a.5.5 0 0 1 .707.707l-2.646 2.647a.5.5 0 0 1-.708 0L5.354 8.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                  Unduh (7x)
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
  <button id="openBtn" class="img-button">
    <img src="assets/pengaduan.png" alt="Buat Pengaduan">
  </button>
  

  <div id="popupForm" class="modal">
    <div class="modal-content">
      <span class="close" id="closeBtn">&times;</span>
      <h2>Form Pengaduan Desa</h2>
      <form action="#" method="post">
        <label for="nama">Nama Lengkap*</label>
        <input type="text" id="nama" name="nama" required>

        <label for="kontak">NIK</label>
        <input type="text" id="NIK" name="NIK" required>

        <label for="kategori">Kategori Pengaduan*</label>
        <select id="kategori" name="kategori" required>
          <option value="">-- Pilih Kategori --</option>
          <option value="layanan">Layanan Publik</option>
          <option value="infrastruktur">Infrastruktur</option>
          <option value="keamanan">Keamanan</option>
        </select>

        <label for="pesan">Isi Pengaduan*</label>
        <textarea id="pesan" name="pesan" rows="4" required></textarea>

        <label for="lampiran">Lampiran</label>
        <input type="file" id="lampiran" name="lampiran" required>

        <button type="submit">Kirim Pengaduan</button>
      </form>
    </div>
  </div>

  <footer>
    <div class="footer-container">

      <div class="footer-logo">
        <img src="assets/LOGO FINAL.png" alt="Logo Desa">
      </div>

      <div class="footer-judul">
        <h3>Desa Soraya</h3>
        <p>Jalan Sultan Hasanuddin KM. 1<br>
        Desa Soraya, Kecamatan Pakis,<br>
        Kabupaten Kinasih<br>
        Provinsi Jawa Utara, 56111</p>
      </div>

      <div class="footer-contact-section">
        <h3>Hubungi Kami</h3>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384" />
          </svg>
          <span>0427 3230288</span>
        </div>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7" />
            <rect x="2" y="4" width="20" height="16" rx="2" />
          </svg>
          <span>desa.Soraya.baru@gmail.com</span>
        </div>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />
          </svg>
          <span>Facebook</span>
        </div>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"
            stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17" />
            <path d="m10 15 5-3-5-3z" />
          </svg>
          <span>YouTube</span>
        </div>
      </div>

      <div class="footer-nomor">
        <h3>Nomor Telepon Penting</h3>
        <ul>
          <li>Damkar Soraya</li>
          <li>Ambulance Soraya</li>
          <li>Babinsa Desa Soraya</li>
          <li>PSTU Soraya</li>
        </ul>
      </div>

      <div class="footer-links">
        <h3>Jelajahi</h3>
        <ul>
          <li><a href="#">JADESTA</a></li>
          <li><a href="#">Website Kemendesa</a></li>
          <li><a href="#">Website Kemendagri</a></li>
          <li><a href="#">Cek DPT Online</a></li>
        </ul>
      </div>
    </div>
  </footer>
  <script>
    function toggleAccordion(header) {
      const content = header.nextElementSibling;
      content.classList.toggle('active');
      header.classList.toggle('active');
    }
  function showPopup() {
    Swal.fire({
      title: '<strong style="font-size: 20px;">Membuka Dokumen Resmi</strong>',
      html: `
          Anda akan membuka dokumen yang bersifat resmi milik <b>Pemerintah Desa Soraya</b>.<br><br>
          <b>Judul:</b> Dummy Dokumen Desa Tahun 2024<br>
          <b>Tanggal Rilis:</b> 14 Januari 2025<br>
          Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book<br>
          <i>Pastikan Anda membaca dan memahami isi dokumen sebelum mengunduh atau menyebarluaskan informasi di dalamnya.</i>
      `,
      imageUrl: 'LOGO FINAL.png',
      imageWidth: 120,
      imageAlt: 'Logo Desa',
      showConfirmButton: true,
      confirmButtonText: 'Tutup Dokumen',
      showCloseButton: true,
      customClass: {
        popup: 'swal-popup-formal',
        confirmButton: 'swal-btn-formal',
        closeButton: 'swal-close-formal'
      }
    });
  }
     const isLoggedIn = localStorage.getItem('loggedIn') === 'true';
    const userAvatar = document.getElementById('userAvatar');
    const loginOption = document.getElementById('loginOption');
    const registerOption = document.getElementById('registerOption');
    const profileOption = document.getElementById('profileOption');
    const logoutOption = document.getElementById('logoutOption');

    if (isLoggedIn) {
      const userNIK = localStorage.getItem('userNIK');
      const userName = localStorage.getItem('userName') || 'User';
      userAvatar.src = 'assets/profile.png';
      userAvatar.title = `${userName} (${userNIK})`;
      loginOption.classList.add('d-none');
      registerOption.classList.add('d-none');
      profileOption.classList.remove('d-none');
      logoutOption.classList.remove('d-none');
    } else {
      userAvatar.src = 'assets/profile.png';
    }

    // Tombol logout
    logoutOption.querySelector('a').onclick = () => {
      // Jangan hapus data login terakhir agar tetap bisa autofill
      localStorage.removeItem('loggedIn');
      localStorage.removeItem('userNIK');
      localStorage.removeItem('userName');
      location.reload();
    };

    const modal = document.getElementById("popupForm");
  const openBtn = document.getElementById("openBtn");
  const closeBtn = document.getElementById("closeBtn");

  openBtn.onclick = () => modal.style.display = "flex";
  closeBtn.onclick = () => modal.style.display = "none";
  window.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

  // PRE-FILL NIK jika user login
  document.addEventListener('DOMContentLoaded', () => {
  const loggedIn = localStorage.getItem('loggedIn') === 'true';
  const userNIK = localStorage.getItem('userNIK');
  const userName = localStorage.getItem('userName');

  if (loggedIn) {
    if (userNIK) {
      const nikField = document.getElementById('NIK');
      nikField.value = userNIK;
      nikField.readOnly = true;
    }

    if (userName) {
      const namaField = document.getElementById('nama');
      namaField.value = userName;
      namaField.readOnly = true;
    }
  }
});


  // HANDLE SUBMIT PENGADUAN
  const form = document.querySelector('#popupForm form');
  form.addEventListener('submit', function(e) {
    e.preventDefault();

    const loggedIn = localStorage.getItem('loggedIn') === 'true';
    if (!loggedIn) {
      alert("Silakan login terlebih dahulu sebelum mengirim pengaduan.");
      window.location.href = 'login.html';  // Arahkan ke halaman utama
      return;
    }

    const nik = document.getElementById('NIK').value.trim();
    const kategori = document.getElementById('kategori').value;
    const pesan = document.getElementById('pesan').value.trim();

    const users = JSON.parse(localStorage.getItem('users') || '[]');
    const user = users.find(u => u.nik === nik);
    if (!user) {
      alert("NIK Anda tidak terdaftar.");
      return;
    }

    const pengaduan = {
      nama: user.nama,
      nik: nik,
      kategori: kategori,
      pesan: pesan,
      tanggal: new Date().toLocaleString()
    };

    const semuaPengaduan = JSON.parse(localStorage.getItem('pengaduan') || '[]');
    semuaPengaduan.push(pengaduan);
    localStorage.setItem('pengaduan', JSON.stringify(semuaPengaduan));

    window.location.href = 'pengaduan.html';
  });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
