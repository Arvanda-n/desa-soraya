<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Desa Soraya</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100..900&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">  
  <link rel="stylesheet" href="full.css">
</head>
<body class="berita-list">
<!-- Navbar -->
 <div class="navbar-no">
    <div class="navbar-logo-home">
      <img src="assets/LOGO FINAL.png" alt="Logo" />
    </div>
    <div class="navbar-menu-home">
      <a href="index.html" >Home</a> |

      <div class="dropdown d-inline">
        <a class="nav-link dropdown-toggle"  href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          Informasi
        </a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="infografis.html">Infografis</a></li>
          <li><a class="dropdown-item" href="ppid.html">PPID</a></li>
        </ul>
      </div>

      <a href="Profil Desaa.html">Profil Desa</a> |
      <a href="#" class="active">Berita</a> |

      <!-- Tambahan Dropdown Avatar -->
      <div class="dropdown d-inline">
        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="assets/profile.png" alt="User" width="40" height="40" class="rounded-circle" id="userAvatar">
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li id="loginOption"><a class="dropdown-item" href="login.html">Login</a></li>
          <li id="registerOption"><a class="dropdown-item" href="registrasi.html">Register</a></li>
          <li id="profileOption" class="d-none"><a class="dropdown-item" href="pengaduan.html">Profile</a></li>
          <li id="logoutOption" class="d-none"><a class="dropdown-item" href="#">Logout</a></li>
        </ul>
      </div>

    </div>
  </div>
</div>

  <div class="Judul">
  <h1> BERITA DESA</h1>
  <p>Menyajikan informasi terbaru tentang peristiwa, dan berita terkini di Desa Soraya</p>
  </div>

  <div class="berita-section">
    <div class="berita-grid">
      <a href="berita 1.html">
      <div class="berita-item">
        <img src="assets/hajatan2.jpeg" alt="Berita 1">
        <h3>Pesta Hajatan Meriah di Desa Soraya</h3>
        <p>Suasana meriah menyelimuti Desa Soraya pada akhir pekan lalu saat salah satu warga menggelar pesta hajatan pernikahan yang sarat nuansa adat dan kebersamaan. Hajatan ini dilangsungkan di...</p>
      </div>
      </a>

      <a href="berita 2.html">
      <div class="berita-item">
        <img src="assets/kerjabakti2.jpg" alt="Berita 2">
        <h3>Warga Desa Soraya Gelar Kerja Bakti Bersama</h3>
        <p>Warga Desa Soraya kembali menunjukkan semangat gotong royong melalui kegiatan kerja bakti yang dilaksanakan pada Minggu pagi (15/6). Kegiatan ini difokuskan pada pembersi...</p>
      </div>
      </a>

      <a href="berita 3.html">
      <div class="berita-item">
        <img src="assets/karang tarunaa.jpeg" alt="Berita 3">
        <h3>Karang Taruna Desa Soraya Aktif Kembangkan Kegiatan Pemuda </h3>
        <p> Karang Taruna Desa Soraya terus menunjukkan eksistensinya sebagai wadah pemuda yang aktif dan kreatif. Dalam beberapa bulan terakhir, or...</p>
      </div>
      </a>

      <a href="berita 4.html">
      <div class="berita-item">
        <img src="assets/17an2.jpeg" alt="Berita 4">
        <h3>Warga Desa Soraya Rayakan HUT RI ke-80 dengan Berbagai Mac...</h3>
        <p>Suasana penuh semangat dan keceriaan menyelimuti Desa Soraya pada perayaan Hari Ulang Tahun ke-80 Kemerdekaan Republik Indonesia. Warga dari berbagai kalangan tump...</p>
      </div>
      </a>

      <a href="berita 5.html">
      <div class="berita-item">
        <img src="assets/obor2.jpeg" alt="Berita 5">
        <h3>Semarak Pawai Obor di Desa Soraya Sambut Hari Kemerdekaan RI</h3>
        <p>Menjelang peringatan Hari Ulang Tahun ke-80 Republik Indonesia, warga Desa Soraya menggelar pawai Obor yang berlangsung meriah pada sabtu malam (16/8). Acara ini diikuti oleh...</p>
      </div>
      </a>
      
      <a href="berita 6.html">
      <div class="berita-item">
        <img src="assets/senam2.jpeg" alt="Berita 6">
        <h3>Warga Desa Soraya Rutin Gelar Senam Pagi Demi Kesehatan dan Keber...</h3>
        <p>Demi menjaga kebugaran dan mempererat tali silaturahmi antarwarga, Desa Soraya rutin mengadakan kegiatan senam pagi bersama setiap hari minggu Kegiatan ini berlangsung di l...</p>
      </div>
      </a>

    </div>
  </div>
  

<div class="pagination">
  <a href="berita list.html">&laquo;</a>
  <a href="berita list.html" class="active">1</a>
  <a href="berita list 2.html">2</a>
  <a href="berita list 2.html">&raquo;</a>
</div>

<button id="openBtn" class="img-button">
    <img src="assets/pengaduan.png" alt="Buat Pengaduan">
  </button>
  

  <div id="popupForm" class="modal">
    <div class="modal-content">
      <span class="close" id="closeBtn">&times;</span>
      <h2>Form Pengaduan Desa</h2>
      <form action="#" method="post">
        <label for="nama">Nama Lengkap*</label>
        <input type="text" id="nama" name="nama" required>

        <label for="kontak">NIK</label>
        <input type="text" id="NIK" name="NIK" required>

        <label for="kategori">Kategori Pengaduan*</label>
        <select id="kategori" name="kategori" required>
          <option value="">-- Pilih Kategori --</option>
          <option value="layanan">Layanan Publik</option>
          <option value="infrastruktur">Infrastruktur</option>
          <option value="keamanan">Keamanan</option>
        </select>

        <label for="pesan">Isi Pengaduan*</label>
        <textarea id="pesan" name="pesan" rows="4" required></textarea>

        <label for="lampiran">Lampiran</label>
        <input type="file" id="lampiran" name="lampiran" required>

        <button type="submit">Kirim Pengaduan</button>
      </form>
    </div>
  </div>
 
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const items = document.querySelectorAll(".berita-item");

    items.forEach((item, index) => {
      setTimeout(() => {
        item.classList.add("show");
      }, index * 150); // delay antar item
    });
  });

   const isLoggedIn = localStorage.getItem('loggedIn') === 'true';
    const userAvatar = document.getElementById('userAvatar');
    const loginOption = document.getElementById('loginOption');
    const registerOption = document.getElementById('registerOption');
    const profileOption = document.getElementById('profileOption');
    const logoutOption = document.getElementById('logoutOption');

    if (isLoggedIn) {
      const userNIK = localStorage.getItem('userNIK');
      const userName = localStorage.getItem('userName') || 'User';
      userAvatar.src = 'assets/profile.png';
      userAvatar.title = `${userName} (${userNIK})`;
      loginOption.classList.add('d-none');
      registerOption.classList.add('d-none');
      profileOption.classList.remove('d-none');
      logoutOption.classList.remove('d-none');
    } else {
      userAvatar.src = 'assets/profile.png';
    }

    // Tombol logout
    logoutOption.querySelector('a').onclick = () => {
      // Jangan hapus data login terakhir agar tetap bisa autofill
      localStorage.removeItem('loggedIn');
      localStorage.removeItem('userNIK');
      localStorage.removeItem('userName');
      location.reload();
    };

    const modal = document.getElementById("popupForm");
  const openBtn = document.getElementById("openBtn");
  const closeBtn = document.getElementById("closeBtn");

  openBtn.onclick = () => modal.style.display = "flex";
  closeBtn.onclick = () => modal.style.display = "none";
  window.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

  // PRE-FILL NIK jika user login
  document.addEventListener('DOMContentLoaded', () => {
  const loggedIn = localStorage.getItem('loggedIn') === 'true';
  const userNIK = localStorage.getItem('userNIK');
  const userName = localStorage.getItem('userName');

  if (loggedIn) {
    if (userNIK) {
      const nikField = document.getElementById('NIK');
      nikField.value = userNIK;
      nikField.readOnly = true;
    }

    if (userName) {
      const namaField = document.getElementById('nama');
      namaField.value = userName;
      namaField.readOnly = true;
    }
  }
});


  // HANDLE SUBMIT PENGADUAN
  const form = document.querySelector('#popupForm form');
  form.addEventListener('submit', function(e) {
    e.preventDefault();

    const loggedIn = localStorage.getItem('loggedIn') === 'true';
    if (!loggedIn) {
      alert("Silakan login terlebih dahulu sebelum mengirim pengaduan.");
      window.location.href = 'login.html';  // Arahkan ke halaman utama
      return;
    }

    const nik = document.getElementById('NIK').value.trim();
    const kategori = document.getElementById('kategori').value;
    const pesan = document.getElementById('pesan').value.trim();

    const users = JSON.parse(localStorage.getItem('users') || '[]');
    const user = users.find(u => u.nik === nik);
    if (!user) {
      alert("NIK Anda tidak terdaftar.");
      return;
    }

    const pengaduan = {
      nama: user.nama,
      nik: nik,
      kategori: kategori,
      pesan: pesan,
      tanggal: new Date().toLocaleString()
    };

    const semuaPengaduan = JSON.parse(localStorage.getItem('pengaduan') || '[]');
    semuaPengaduan.push(pengaduan);
    localStorage.setItem('pengaduan', JSON.stringify(semuaPengaduan));

    window.location.href = 'pengaduan.html';
  });
</script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
